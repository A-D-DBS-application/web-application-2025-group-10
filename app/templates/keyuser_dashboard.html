{% extends "base.html" %}
{% block title %}Key user Dashboard{% endblock %}
{% block body_class %}page-dashboard{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}
{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <div>
            <h1 class="dashboard-title">Key user Dashboard</h1>
            <div class="dashboard-subtext">Businessunit: <strong>{{ session.get('businessunit_naam') }}</strong></div>
        </div>
        <a href="{{ url_for('main.logout') }}" class="btn-main dashboard-btn-logout">Uitloggen</a>
    </div>

    <div class="flash-messages">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    {% set css = 'alert-success' if category == 'success' else 'alert-error' if category == 'error' else 'alert-info' %}
                    <div class="alert {{ css }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    </div>

    <div class="dashboard-grid dashboard-grid--keyuser">
        <div class="dashboard-stats">
            <h2 class="dashboard-title-small">Bedrijfs-klachten</h2>
            <p>Aantal openstaande klachten: <strong>{{ total_klachten }}</strong></p>
            <p>Nieuwe klachten vandaag: <strong>{{ today_new }}</strong></p>
        </div>

        <a class="dashboard-card" href="{{ url_for('main.klacht_aanmaken') }}">
            <div class="dashboard-icon">&#128221;</div>
            <div class="dashboard-title-small">Nieuwe klacht</div>
            <p class="dashboard-sub">Maak een nieuwe klacht aan</p>
        </a>

        <a class="dashboard-card" href="{{ url_for('main.user_klachten') }}">
            <div class="dashboard-icon">&#128194;</div>
            <div class="dashboard-title-small">Bekijk klachten</div>
            <p class="dashboard-sub">Bekijk de klachten van {{ businessunit or 'jouw businessunit' }}</p>
        </a>

        <a class="dashboard-card dashboard-card--accent" href="/user/klachten/export">
            <div class="dashboard-icon">&#128190;</div>
            <div class="dashboard-title-small">Export (CSV)</div>
            <p class="dashboard-sub">Download een CSV-export</p>
        </a>
    </div>
</div>
{% endblock %}
